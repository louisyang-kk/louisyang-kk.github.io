/*!
 * Copyright (c) 2021 KKLab. All rights reserved.
 * version: 1.0.2
 */
!function webpackUniversalModuleDefinition(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.omega=n():e.omega=n()}(self,(function(){return(()=>{var e={992:()=>{}},n={};function __webpack_require__(r){if(n[r])return n[r].exports;var o=n[r]={exports:{}};return e[r](o,o.exports,__webpack_require__),o.exports}__webpack_require__.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(n,{a:n}),n},__webpack_require__.d=(e,n)=>{for(var r in n)__webpack_require__.o(n,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";__webpack_require__.r(r),__webpack_require__.d(r,{Agent:()=>$,Config:()=>a,Constants:()=>st,Engine:()=>f,Message:()=>l,Utils:()=>it()});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{TIMED_OUT:()=>v,UNEXPECTED:()=>p});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{PENDING:()=>d,REJECTED:()=>y,RESOLVED:()=>_});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{ERROR:()=>m,NOTIFICATION:()=>b,REQUEST:()=>S,RESPONSE:()=>R});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{ANY:()=>O,BROADCAST:()=>E,CHANNEL_MESSAGE:()=>T,CHANNEL_OWNER_MESSAGE:()=>j,CLOSE_CHANNEL:()=>B,CLOSE_VOTE:()=>q,GET_CHANNEL_META:()=>w,GET_SESSION_META:()=>z,GET_VOTE_META:()=>H,HELLO:()=>P,JOIN_CHANNEL:()=>I,JOIN_VOTE:()=>x,LEAVE_CHANNEL:()=>N,LEAVE_VOTE:()=>L,PING:()=>M,PONG:()=>k,SERVER_TIME:()=>V,SESSION_MESSAGE:()=>Q,SET_CHANNEL_META:()=>A,SET_SESSION_META:()=>W,SET_VOTE_META:()=>G,VOTE_COUNT:()=>U,VOTE_MESSAGE:()=>J,VOTE_OWNER_MESSAGE:()=>K,VOTE_SELECT:()=>D,VOTE_STATUS:()=>F});var c={};function _defineProperty(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,n,r){return n&&_defineProperties(e.prototype,n),r&&_defineProperties(e,r),e}__webpack_require__.r(c),__webpack_require__.d(c,{BROADCAST:()=>et,CREATE_CHANNEL:()=>rt,CREATE_VOTE:()=>ot,MANAGE:()=>tt,MONITOR:()=>nt});const a=function Config(e){var n=e.domain,r=void 0===n?"omega.kklab.com":n,o=e.appId,s=void 0===o?"":o,c=e.token,a=void 0===c?"":c;_classCallCheck(this,Config),this.domain=r,this.appId=s,this.token=a};function _setPrototypeOf(e,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,n){return e.__proto__=n,e})(e,n)}function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&_setPrototypeOf(e,n)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _possibleConstructorReturn(e,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const u=function Message(){_classCallCheck(this,Message)};function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function Pong_createSuper(e){var n=function Pong_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function Broadcast_createSuper(e){var n=function Broadcast_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function Hello_createSuper(e){var n=function Hello_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function ServerTime_createSuper(e){var n=function ServerTime_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function GetChannelMeta_createSuper(e){var n=function GetChannelMeta_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function SetChannelMeta_createSuper(e){var n=function SetChannelMeta_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function CreateChannel_createSuper(e){var n=function CreateChannel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function JoinChannel_createSuper(e){var n=function JoinChannel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function LeaveChannel_createSuper(e){var n=function LeaveChannel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function CloseChannel_createSuper(e){var n=function CloseChannel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function ChannelMessage_createSuper(e){var n=function ChannelMessage_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function ChannelOwnerMessage_createSuper(e){var n=function ChannelOwnerMessage_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function GetVoteMeta_createSuper(e){var n=function GetVoteMeta_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function SetVoteMeta_createSuper(e){var n=function SetVoteMeta_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function CreateVote_createSuper(e){var n=function CreateVote_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function JoinVote_createSuper(e){var n=function JoinVote_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function LeaveVote_createSuper(e){var n=function LeaveVote_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function CloseVote_createSuper(e){var n=function CloseVote_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function VoteMessage_createSuper(e){var n=function VoteMessage_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function VoteSelect_createSuper(e){var n=function VoteSelect_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function VoteCount_createSuper(e){var n=function VoteCount_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function VoteOwnerMessage_createSuper(e){var n=function VoteOwnerMessage_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function VoteStatus_createSuper(e){var n=function VoteStatus_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function GetSessionMeta_createSuper(e){var n=function GetSessionMeta_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function SetSessionMeta_createSuper(e){var n=function SetSessionMeta_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function SessionMessage_createSuper(e){var n=function SessionMessage_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function Error_createSuper(e){var n=function Error_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(n){var s=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}const l={Ping:function(e){_inherits(Ping,e);var n=_createSuper(Ping);function Ping(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,Ping),(e=n.call(this)).setAttributes(r),e}return _createClass(Ping,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null}}]),Ping}(u),Pong:function(e){_inherits(Pong,e);var n=Pong_createSuper(Pong);function Pong(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,Pong),(e=n.call(this)).setAttributes(r),e}return _createClass(Pong,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null}}]),Pong}(u),Broadcast:function(e){_inherits(Broadcast,e);var n=Broadcast_createSuper(Broadcast);function Broadcast(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,Broadcast),(e=n.call(this)).setAttributes(r),e}return _createClass(Broadcast,[{key:"setAttributes",value:function setAttributes(e){this.transitId=void 0===e.i?null:e.i,this.classCode=void 0===e.c?null:e.c,this.timestamp=void 0===e.t?null:e.t,this.message=void 0===(e.d||{}).m?null:e.d.m}}]),Broadcast}(u),Hello:function(e){_inherits(Hello,e);var n=Hello_createSuper(Hello);function Hello(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,Hello),(e=n.call(this)).setAttributes(r),e}return _createClass(Hello,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.sessionId=void 0===(e.d||{}).s?null:e.d.s}}]),Hello}(u),ServerTime:function(e){_inherits(ServerTime,e);var n=ServerTime_createSuper(ServerTime);function ServerTime(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,ServerTime),(e=n.call(this)).setAttributes(r),e}return _createClass(ServerTime,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.unixNano=void 0===(e.d||{}).n?null:e.d.n,this.unixTimestamp=void 0===(e.d||{}).t?null:e.d.t}}]),ServerTime}(u),GetChannelMeta:function(e){_inherits(GetChannelMeta,e);var n=GetChannelMeta_createSuper(GetChannelMeta);function GetChannelMeta(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,GetChannelMeta),(e=n.call(this)).setAttributes(r),e}return _createClass(GetChannelMeta,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.channelId=void 0===(e.d||{}).ch?null:e.d.ch,this.data=void 0===(e.d||{}).d?null:e.d.d}}]),GetChannelMeta}(u),SetChannelMeta:function(e){_inherits(SetChannelMeta,e);var n=SetChannelMeta_createSuper(SetChannelMeta);function SetChannelMeta(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,SetChannelMeta),(e=n.call(this)).setAttributes(r),e}return _createClass(SetChannelMeta,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null}}]),SetChannelMeta}(u),CreateChannel:function(e){_inherits(CreateChannel,e);var n=CreateChannel_createSuper(CreateChannel);function CreateChannel(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,CreateChannel),(e=n.call(this)).setAttributes(r),e}return _createClass(CreateChannel,[{key:"setAttributes",value:function setAttributes(e){this.appId=e.app_id||null,this.channelId=e.channel_id||null,this.directUrl=e.direct_url||null,this.idleTimeout=e.idle_timeout||null,this.ownerKey=e.owner_key||null,this.participatorKey=e.participator_key||null,this.region=e.region||null}}]),CreateChannel}(u),JoinChannel:function(e){_inherits(JoinChannel,e);var n=JoinChannel_createSuper(JoinChannel);function JoinChannel(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,JoinChannel),(e=n.call(this)).setAttributes(r),e}return _createClass(JoinChannel,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.channelId=void 0===(e.d||{}).ch?null:e.d.ch,this.channelMetadata=void 0===(e.d||{}).chm?null:e.d.chm,this.sessionId=void 0===(e.d||{}).s?null:e.d.s,this.sessionMetadata=void 0===(e.d||{}).sm?null:e.d.sm,this.subject=void 0===(e.d||{}).sub?null:e.d.sub}}]),JoinChannel}(u),LeaveChannel:function(e){_inherits(LeaveChannel,e);var n=LeaveChannel_createSuper(LeaveChannel);function LeaveChannel(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,LeaveChannel),(e=n.call(this)).setAttributes(r),e}return _createClass(LeaveChannel,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.channelId=void 0===(e.d||{}).ch?null:e.d.ch,this.sessionId=void 0===(e.d||{}).s?null:e.d.s}}]),LeaveChannel}(u),CloseChannel:function(e){_inherits(CloseChannel,e);var n=CloseChannel_createSuper(CloseChannel);function CloseChannel(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,CloseChannel),(e=n.call(this)).setAttributes(r),e}return _createClass(CloseChannel,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.channelId=void 0===(e.d||{}).ch?null:e.d.ch}}]),CloseChannel}(u),ChannelMessage:function(e){_inherits(ChannelMessage,e);var n=ChannelMessage_createSuper(ChannelMessage);function ChannelMessage(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,ChannelMessage),(e=n.call(this)).setAttributes(r),e}return _createClass(ChannelMessage,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.channelId=void 0===(e.d||{}).ch?null:e.d.ch,this.fromSessionId=void 0===(e.d||{}).fs?null:e.d.fs,this.message=void 0===(e.d||{}).m?null:e.d.m}}]),ChannelMessage}(u),ChannelOwnerMessage:function(e){_inherits(ChannelOwnerMessage,e);var n=ChannelOwnerMessage_createSuper(ChannelOwnerMessage);function ChannelOwnerMessage(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,ChannelOwnerMessage),(e=n.call(this)).setAttributes(r),e}return _createClass(ChannelOwnerMessage,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.channelId=void 0===(e.d||{}).ch?null:e.d.ch,this.message=void 0===(e.d||{}).m?null:e.d.m}}]),ChannelOwnerMessage}(u),GetVoteMeta:function(e){_inherits(GetVoteMeta,e);var n=GetVoteMeta_createSuper(GetVoteMeta);function GetVoteMeta(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,GetVoteMeta),(e=n.call(this)).setAttributes(r),e}return _createClass(GetVoteMeta,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.voteId=void 0===(e.d||{}).vt?null:e.d.vt,this.name=void 0===(e.d||{}).n?null:e.d.n,this.data=void 0===(e.d||{}).d?null:e.d.d,this.voteOptions=(e.d.vtos||[]).map((function(e){return{id:e.i,name:e.n,subjects:e.subl||null}}))}}]),GetVoteMeta}(u),SetVoteMeta:function(e){_inherits(SetVoteMeta,e);var n=SetVoteMeta_createSuper(SetVoteMeta);function SetVoteMeta(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,SetVoteMeta),(e=n.call(this)).setAttributes(r),e}return _createClass(SetVoteMeta,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null}}]),SetVoteMeta}(u),CreateVote:function(e){_inherits(CreateVote,e);var n=CreateVote_createSuper(CreateVote);function CreateVote(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,CreateVote),(e=n.call(this)).setAttributes(r),e}return _createClass(CreateVote,[{key:"setAttributes",value:function setAttributes(e){this.appId=e.app_id||null,this.directUrl=e.direct_url||null,this.idleTimeout=e.idle_timeout||null,this.voteKey=e.key||null,this.name=e.name||null,this.unique=e.unique||null,this.voteId=e.vote_id||null,this.voteOptions=e.vote_options||[]}}]),CreateVote}(u),JoinVote:function(e){_inherits(JoinVote,e);var n=JoinVote_createSuper(JoinVote);function JoinVote(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,JoinVote),(e=n.call(this)).setAttributes(r),e}return _createClass(JoinVote,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.voteId=void 0===(e.d||{}).vt?null:e.d.vt,this.name=void 0===(e.d||{}).n?null:e.d.n,this.voteMetadata=void 0===(e.d||{}).vtm?null:e.d.vtm,this.sessionId=void 0===(e.d||{}).s?null:e.d.s,this.sessionMetadata=void 0===(e.d||{}).sm?null:e.d.sm,this.voteOptions=(e.d.vtos||[]).map((function(e){return{id:e.i,name:e.n,subjects:e.subl||null}}))}}]),JoinVote}(u),LeaveVote:function(e){_inherits(LeaveVote,e);var n=LeaveVote_createSuper(LeaveVote);function LeaveVote(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,LeaveVote),(e=n.call(this)).setAttributes(r),e}return _createClass(LeaveVote,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null}}]),LeaveVote}(u),CloseVote:function(e){_inherits(CloseVote,e);var n=CloseVote_createSuper(CloseVote);function CloseVote(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,CloseVote),(e=n.call(this)).setAttributes(r),e}return _createClass(CloseVote,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.voteId=void 0===(e.d||{}).vt?null:e.d.vt}}]),CloseVote}(u),VoteMessage:function(e){_inherits(VoteMessage,e);var n=VoteMessage_createSuper(VoteMessage);function VoteMessage(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,VoteMessage),(e=n.call(this)).setAttributes(r),e}return _createClass(VoteMessage,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.voteId=void 0===(e.d||{}).vt?null:e.d.vt,this.fromSessionId=void 0===(e.d||{}).fs?null:e.d.fs,this.message=void 0===(e.d||{}).m?null:e.d.m}}]),VoteMessage}(u),VoteSelect:function(e){_inherits(VoteSelect,e);var n=VoteSelect_createSuper(VoteSelect);function VoteSelect(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,VoteSelect),(e=n.call(this)).setAttributes(r),e}return _createClass(VoteSelect,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.voteId=void 0===(e.d||{}).vt?null:e.d.vt,this.voteOptionId=void 0===(e.d||{}).vto?null:e.d.vto,this.deny=void 0===(e.d||{}).de?null:e.d.de}}]),VoteSelect}(u),VoteCount:function(e){_inherits(VoteCount,e);var n=VoteCount_createSuper(VoteCount);function VoteCount(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,VoteCount),(e=n.call(this)).setAttributes(r),e}return _createClass(VoteCount,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.voteId=void 0===(e.d||{}).vt?null:e.d.vt,this.voteOptions=(e.d.vtos||[]).map((function(e){return{id:e.i,name:e.n,count:e.c||null,subjects:e.subl||null}}))}}]),VoteCount}(u),VoteOwnerMessage:function(e){_inherits(VoteOwnerMessage,e);var n=VoteOwnerMessage_createSuper(VoteOwnerMessage);function VoteOwnerMessage(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,VoteOwnerMessage),(e=n.call(this)).setAttributes(r),e}return _createClass(VoteOwnerMessage,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.voteId=void 0===(e.d||{}).vt?null:e.d.vt,this.message=void 0===(e.d||{}).m?null:e.d.m}}]),VoteOwnerMessage}(u),VoteStatus:function(e){_inherits(VoteStatus,e);var n=VoteStatus_createSuper(VoteStatus);function VoteStatus(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,VoteStatus),(e=n.call(this)).setAttributes(r),e}return _createClass(VoteStatus,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.voteId=void 0===(e.d||{}).vt?null:e.d.vt,this.status=void 0===(e.d||{}).st?null:e.d.st}}]),VoteStatus}(u),GetSessionMeta:function(e){_inherits(GetSessionMeta,e);var n=GetSessionMeta_createSuper(GetSessionMeta);function GetSessionMeta(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,GetSessionMeta),(e=n.call(this)).setAttributes(r),e}return _createClass(GetSessionMeta,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.sessionId=void 0===(e.d||{}).s?null:e.d.s,this.data=void 0===(e.d||{}).d?null:e.d.d}}]),GetSessionMeta}(u),SetSessionMeta:function(e){_inherits(SetSessionMeta,e);var n=SetSessionMeta_createSuper(SetSessionMeta);function SetSessionMeta(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,SetSessionMeta),(e=n.call(this)).setAttributes(r),e}return _createClass(SetSessionMeta,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null}}]),SetSessionMeta}(u),SessionMessage:function(e){_inherits(SessionMessage,e);var n=SessionMessage_createSuper(SessionMessage);function SessionMessage(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,SessionMessage),(e=n.call(this)).setAttributes(r),e}return _createClass(SessionMessage,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.fromSessionId=void 0===(e.d||{}).fs?null:e.d.fs,this.message=void 0===(e.d||{}).m?null:e.d.m}}]),SessionMessage}(u),Error:function(e){_inherits(Error,e);var n=Error_createSuper(Error);function Error(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,Error),(e=n.call(this)).setAttributes(r),e}return _createClass(Error,[{key:"setAttributes",value:function setAttributes(e){this.transitId=e.i||null,this.classCode=e.c||null,this.timestamp=e.t||null,this.data=e.d||null,this.error=(e.e||{}).error||null,this.errorLevel=(e.e||{}).error_level||null,this.errorCategory=(e.e||{}).error_category||null,this.errorCode=(e.e||{}).error_code||null,this.errorDescription=(e.e||{}).error_description||null,this.message=(e.e||{}).message||null,this.statusCode=(e.e||{}).status_code||null}}]),Error}(u)};const f=function(){function Engine(e){if(_classCallCheck(this,Engine),!(e instanceof a))throw new TypeError("bad config");this.config=e}return _createClass(Engine,[{key:"discovery",value:function discovery(){var e=this,n="https://gd.".concat(this.config.domain,"/discovery/").concat(this.config.appId);return new Promise((function(r,o){fetch(n,{method:"GET",headers:{Authorization:"Bearer ".concat(e.config.token)}}).then((function(e){return e.json()})).then((function(n){e.apiUri=n.node_api_uri,e.wsUri=n.node_ws_uri,r()})).catch((function(e){o(e)}))}))}},{key:"createChannel",value:function createChannel(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s="".concat(this.apiUri,"/d/channels");return new Promise((function(c,a){fetch(s,{method:"POST",headers:{Authorization:"Bearer ".concat(n.config.token)},body:JSON.stringify({name:e,idle_timeout:r,options:o})}).then((function(e){return e.json()})).then((function(e){c(new l.CreateChannel(e))})).catch((function(e){a(e)}))}))}},{key:"createVote",value:function createVote(e,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c="".concat(this.apiUri,"/d/votes");return new Promise((function(a,u){fetch(c,{method:"POST",headers:{Authorization:"Bearer ".concat(r.config.token)},body:JSON.stringify({name:e,vote_options:n,idle_timeout:o,options:s})}).then((function(e){return e.json()})).then((function(e){a(new l.CreateVote(e))})).catch((function(e){u(e)}))}))}}]),Engine}();const h=function AgentError(e,n){_classCallCheck(this,AgentError),this.code=e,this.message=n};var p="9000",v="9001",d="pending",_="resolved",y="rejected";const C=function(){function ExposedPromise(e,n,r){_classCallCheck(this,ExposedPromise),this.id=e,this.resolveEvent=n,this.rejectEvent=r,this.setStatus(d)}return _createClass(ExposedPromise,[{key:"setStatus",value:function setStatus(e){this.status=e}},{key:"withTimeout",value:function withTimeout(e){var n=this;return setTimeout((function(){n.reject(new h(v,"timed out"))}),1e3*e),this}},{key:"resolve",value:function resolve(e){this.setStatus(_),this.resolveEvent(e)}},{key:"reject",value:function reject(e){this.setStatus(y),this.rejectEvent(e)}}]),ExposedPromise}();const g=function(){function Pool(){_classCallCheck(this,Pool),this.promises=[]}return _createClass(Pool,[{key:"push",value:function push(e){if(!(e instanceof C))throw new TypeError("bad exposed promise");this.promises.push(e)}},{key:"pull",value:function pull(e){var n=this.promises.findIndex((function(n){return n.id===e}));return-1===n?null:this.promises.splice(n,1).pop()}},{key:"prune",value:function prune(){for(var e=0;e<this.promises.length;e+=1)this.promises[e].status!==d&&(this.promises.splice(e,1),e-=1)}}]),Pool}();var S="0",R="1",b="4",m="9",O="*",M="009",k="010",E="018",P="019",V="020",w="200",A="201",I="203",N="204",B="205",T="206",j="209",H="230",G="231",x="233",L="234",q="235",J="236",D="237",U="238",K="239",F="240",z="250",W="251",Q="252",X=function joinChannel(e,n){return{c:"".concat(I).concat(S),d:{ch:e,k:n}}},Y=function joinVote(e,n){return{c:"".concat(x).concat(S),d:{vt:e,k:n}}},Z=function voteCount(e,n){return{c:"".concat(U).concat(S),d:{vt:e,k:n}}};function ownKeys(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(r),!0).forEach((function(n){_defineProperty(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}const $=function(){function Agent(e){if(_classCallCheck(this,Agent),!(e instanceof a))throw new TypeError("bad config");this.engine=new f(e),this.pool=new g,this.registerEventHandlers()}return _createClass(Agent,[{key:"connect",value:function connect(){var e=this;return this.conn?null:new Promise((function(n,r){e.engine.discovery().then((function(){e.conn=new WebSocket(e.engine.wsUri,["gundam",e.engine.config.token]),e.conn.onopen=function(n){e.onConnectEventHandler(n)},e.conn.onmessage=function(r){e.onMessageEventHandler(r),e.parseResponse(r),e.parseSessionId(r).then((function(){return n()})),e.pong(r)},e.conn.onerror=function(e){return r(e)},e.conn.onclose=function(n){e.onDisconnectEventHandler(n)}})).catch((function(e){return r(e)}))}))}},{key:"parseSessionId",value:function parseSessionId(e){var n=this;return new Promise((function(r){if(!n.sessionId){var o=JSON.parse(e.data);o.c==="".concat(P).concat(S)&&(n.sessionId=o.d.s,r())}}))}},{key:"pong",value:function pong(e){var n=JSON.parse(e.data);n.c==="".concat(M).concat(S)&&this.conn.send(JSON.stringify(_objectSpread({i:n.i,t:this.constructor.t()},function pong(){return{c:"".concat(k).concat(R)}}())))}},{key:"ping",value:function ping(){return this.send(function ping(){return{c:"".concat(M).concat(S)}}())}},{key:"broadcast",value:function broadcast(e){return this.send(function broadcast(e){return{c:"".concat(E).concat(S),d:{m:e}}}(e))}},{key:"hello",value:function hello(){return this.send(function hello(){return{c:"".concat(P).concat(S)}}())}},{key:"time",value:function time(){return this.send(function time(){return{c:"".concat(V).concat(S)}}())}},{key:"getChannelMetadata",value:function getChannelMetadata(e){return this.send(function getChannelMetadata(e){return{c:"".concat(w).concat(S),d:{ch:e}}}(e))}},{key:"setChannelMetadata",value:function setChannelMetadata(e,n){if(!(n instanceof Object)||n instanceof Array)throw new TypeError("data must be an object");return this.send(function setChannelMetadata(e,n){return{c:"".concat(A).concat(S),d:{ch:e,d:n}}}(e,n))}},{key:"createChannel",value:function createChannel(e,n,r){return this.engine.createChannel(e,n,r)}},{key:"joinChannel",value:function joinChannel(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.send(X(e,n))}},{key:"leaveChannel",value:function leaveChannel(e){return this.send(function leaveChannel(e){return{c:"".concat(N).concat(S),d:{ch:e}}}(e))}},{key:"closeChannel",value:function closeChannel(e,n){return this.send(function closeChannel(e,n){return{c:"".concat(B).concat(S),d:{ch:e,k:n}}}(e,n))}},{key:"channelMessage",value:function channelMessage(e,n){return this.send(function channelMessage(e,n){return{c:"".concat(T).concat(S),d:{ch:e,m:n}}}(e,n))}},{key:"channelOwnerMessage",value:function channelOwnerMessage(e,n){return this.send(function channelOwnerMessage(e,n){return{c:"".concat(j).concat(S),d:{ch:e,m:n}}}(e,n))}},{key:"getVoteMeta",value:function getVoteMeta(e){return this.send(function getVoteMeta(e){return{c:"".concat(H).concat(S),d:{vt:e}}}(e))}},{key:"setVoteMeta",value:function setVoteMeta(e,n){if(!(n instanceof Object)||n instanceof Array)throw new TypeError("data must be an object");return this.send(function setVoteMeta(e,n){return{c:"".concat(G).concat(S),d:{vt:e,d:n}}}(e,n))}},{key:"createVote",value:function createVote(e,n,r,o){return this.engine.createVote(e,n,r,o)}},{key:"joinVote",value:function joinVote(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.send(Y(e,n))}},{key:"leaveVote",value:function leaveVote(e){return this.send(function leaveVote(e){return{c:"".concat(L).concat(S),d:{vt:e}}}(e))}},{key:"closeVote",value:function closeVote(e,n){return this.send(function closeVote(e,n){return{c:"".concat(q).concat(S),d:{vt:e,k:n}}}(e,n))}},{key:"voteMessage",value:function voteMessage(e,n){return this.send(function voteMessage(e,n){return{c:"".concat(J).concat(S),d:{vt:e,m:n}}}(e,n))}},{key:"voteSelect",value:function voteSelect(e,n){return this.send(function voteSelect(e,n){return{c:"".concat(D).concat(S),d:{vt:e,vto:n}}}(e,n))}},{key:"voteCount",value:function voteCount(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.send(Z(e,n))}},{key:"voteOwnerMessage",value:function voteOwnerMessage(e,n){return this.send(function voteOwnerMessage(e,n){return{c:"".concat(K).concat(S),d:{vt:e,m:n}}}(e,n))}},{key:"voteStatus",value:function voteStatus(e,n){return this.send(function voteStatus(e,n){return{c:"".concat(F).concat(S),d:{vt:e,st:n}}}(e,n))}},{key:"getSessionMetadata",value:function getSessionMetadata(){return this.send(function getSessionMetadata(e){return{c:"".concat(z).concat(S),d:{s:e}}}(this.sessionId))}},{key:"setSessionMetadata",value:function setSessionMetadata(e,n){if(!(n instanceof Object)||n instanceof Array)throw new TypeError("data must be an object");return this.send(function setSessionMetadata(e,n){return{c:"".concat(W).concat(S),d:{n:e,d:n}}}(e,n))}},{key:"sessionMessage",value:function sessionMessage(e,n){return this.send(function sessionMessage(e,n){return{c:"".concat(Q).concat(S),d:{ts:e,m:n}}}(e,n))}},{key:"send",value:function send(e){var n=this,r=_objectSpread({i:this.constructor.i(),t:this.constructor.t()},e);return this.conn.send(JSON.stringify(r)),this.pool.prune(),new Promise((function(e,o){n.pool.push(new C(r.i,e,o).withTimeout(5))}))}},{key:"disconnect",value:function disconnect(){this.conn.close()}},{key:"parseResponse",value:function parseResponse(e){var n=JSON.parse(e.data);switch(n.c[3]){case S:var r=this.constructor.newMessage(n),o=this.onRequestEventHandlers[n.c];o instanceof Function&&o(r),this.onRequestEventHandlers[O](r);break;case R:var s=this.constructor.newMessage(n),c=this.onResponseEventHandlers[n.c];c instanceof Function&&c(s),this.onResponseEventHandlers[O](s);var a=this.pool.pull(n.i);a&&a.resolve(s);break;case b:var u=this.constructor.newMessage(n),f=this.onNotificationEventHandlers[n.c];f instanceof Function&&f(u),this.onNotificationEventHandlers[O](u);break;case m:var h=new l.Error(n),p=this.onErrorEventHandlers[n.c];p instanceof Function&&p(h),this.onErrorEventHandlers[O](h);var v=this.pool.pull(n.i);v&&v.reject(h)}}},{key:"registerEventHandlers",value:function registerEventHandlers(){this.onConnectEventHandler=function(){},this.onMessageEventHandler=function(){},this.onDisconnectEventHandler=function(){},this.onRequestEventHandlers={},this.onRequestEventHandlers[O]=function(){},this.onResponseEventHandlers={},this.onResponseEventHandlers[O]=function(){},this.onNotificationEventHandlers={},this.onNotificationEventHandlers[O]=function(){},this.onErrorEventHandlers={},this.onErrorEventHandlers[O]=function(){}}},{key:"onConnect",value:function onConnect(e){this.onConnectEventHandler=e}},{key:"onMessage",value:function onMessage(e){this.onMessageEventHandler=e}},{key:"onDisconnect",value:function onDisconnect(e){this.onDisconnectEventHandler=e}},{key:"onRequest",value:function onRequest(e,n){var r=e===O?e:"".concat(e).concat(S);this.onRequestEventHandlers[r]=n}},{key:"onResponse",value:function onResponse(e,n){var r=e===O?e:"".concat(e).concat(R);this.onResponseEventHandlers[r]=n}},{key:"onNotification",value:function onNotification(e,n){var r=e===O?e:"".concat(e).concat(b);this.onNotificationEventHandlers[r]=n}},{key:"onError",value:function onError(e,n){var r=e===O?e:"".concat(e).concat(m);this.onErrorEventHandlers[r]=n}}],[{key:"newMessage",value:function newMessage(e){switch(e.c.substring(0,3)){case M:return new l.Ping(e);case k:return new l.Pong(e);case E:return new l.Broadcast(e);case P:return new l.Hello(e);case V:return new l.ServerTime(e);case w:return new l.GetChannelMeta(e);case A:return new l.SetChannelMeta(e);case I:return new l.JoinChannel(e);case N:return new l.LeaveChannel(e);case B:return new l.CloseChannel(e);case T:return new l.ChannelMessage(e);case j:return new l.ChannelOwnerMessage(e);case H:return new l.GetVoteMeta(e);case G:return new l.SetVoteMeta(e);case x:return new l.JoinVote(e);case L:return new l.LeaveVote(e);case q:return new l.CloseVote(e);case J:return new l.VoteMessage(e);case D:return new l.VoteSelect(e);case U:return new l.VoteCount(e);case K:return new l.VoteOwnerMessage(e);case F:return new l.VoteStatus(e);case z:return new l.GetSessionMeta(e);case W:return new l.SetSessionMeta(e);case Q:return new l.SessionMessage(e);default:return null}}},{key:"i",value:function i(){return Math.floor(Math.random()*Math.floor(1e5))}},{key:"t",value:function t(){return 1e6*Date.now()}}]),Agent}();var tt="manage",et="broadcast",nt="monitor",rt="create_channel",ot="create_vote";const st={Error:e,PromiseStatus:n,ClassCategory:o,ClassCode:s,Privilege:c};var ct=__webpack_require__(992),it=__webpack_require__.n(ct)})(),r})()}));